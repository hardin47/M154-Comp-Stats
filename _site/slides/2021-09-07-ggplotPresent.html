<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Viz &amp; Introduction to ggplot2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Jo Hardin" />
    <meta name="date" content="2021-09-07" />
    <script src="2021-09-07-ggplotPresent_files/header-attrs-2.10.3/header-attrs.js"></script>
    <link href="2021-09-07-ggplotPresent_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="2021-09-07-ggplotPresent_files/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: right, top, my-title, title-slide

# Data Viz &amp; Introduction to ggplot2
### Jo Hardin
### September 7, 2021

---






# Agenda  9/7/21

1. Cholera: what went (didn't go) well with the graphics?
2. Challenger: what didn't go (went) well with the graphics?
3. Thoughts on plotting 

Tufte (1997) &lt;a href = "http://www.edwardtufte.com/tufte/books_textb" target = "_blank"&gt;Visual and Statistical Thinking: Displays of Evidence for Making Decisions&lt;/a&gt;.  (Use Google to find it.)

---

# Preliminaries

1. Make the data stand out

2. Facilitate comparison

3. Add information

---

# Preliminaries

Tufte lists two main motivational steps to working with graphics as part of an argument.

1. "An essential analytic task in making decisions based on evidence is to understand how things work."

2. Making decisions based on evidence requires the appropriate display of that evidence."

---

# Cholera - a picture tells 1000 words

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../images/cholera1.jpg" alt="How many aspects of this graph can you point out which are relevant to figuring out that cholera infection was coming from a single pump?  Are there any distracting aspects?" width="65%" /&gt;
&lt;p class="caption"&gt;How many aspects of this graph can you point out which are relevant to figuring out that cholera infection was coming from a single pump?  Are there any distracting aspects?&lt;/p&gt;
&lt;/div&gt;

---

# Cholera - difficult to interpret

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../images/cholera2.jpg" alt="Why would the outbreak already have begun to decline before the pump handle was removed?" width="80%" /&gt;
&lt;p class="caption"&gt;Why would the outbreak already have begun to decline before the pump handle was removed?&lt;/p&gt;
&lt;/div&gt;

---
# Challenger - Problematic

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../images/challenger2.jpg" alt="One of the graphics which was particularly unconvincing in trying to explain that O-rings fail in the cold." width="70%" /&gt;
&lt;p class="caption"&gt;One of the graphics which was particularly unconvincing in trying to explain that O-rings fail in the cold.&lt;/p&gt;
&lt;/div&gt;

---


# Challenger - Better????

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../images/challenger1.jpg" alt="A different graph of the Challenger information, now sorted by temperature" width="3524" /&gt;
&lt;p class="caption"&gt;A different graph of the Challenger information, now sorted by temperature&lt;/p&gt;
&lt;/div&gt;

---
# Challenger - Improved

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="../images/TuftestemperatureandOringrelationshi.jpg" alt="The graphic the engineers should have led with in trying to persuade the administrators not to launch.  It is evident that the number of O-ring failures is quite highly associated with the ambient temperature.  Note the *vital* information on the x-axis associated with the large number of launches at warm temperatures that had *zero* O-ring failures." width="1040" /&gt;
&lt;p class="caption"&gt;The graphic the engineers should have led with in trying to persuade the administrators not to launch.  It is evident that the number of O-ring failures is quite highly associated with the ambient temperature.  Note the *vital* information on the x-axis associated with the large number of launches at warm temperatures that had *zero* O-ring failures.&lt;/p&gt;
&lt;/div&gt;

---

# Fonts matter

&lt;img src="../images/fontsmatter.png" title="image credit: Will Chase RStudio::conf 2020" alt="image credit: Will Chase RStudio::conf 2020" width="500px" style="display: block; margin: auto;" /&gt;

---

# Advice on plotting, specific

- Avoid having other graph elements interfere with data
- Use visually prominent symbols
- Avoid over-plotting  (One way to avoid over plotting: jitter the values)
- Different values of data may obscure each other
- Include all or nearly all of the data
- Fill data region

---

# Advice on plotting, general

- Eliminate superfluous material
- Facilitate comparisons
- Choose the best scale
- Make the plot data / information rich
- Use good captions, alt text, conclusions


---

# Simplify

&lt;div class="figure"&gt;
&lt;img src="../images/data-ink-bar.gif" alt="A gif of a barplot which starts out cluttered with labels and slowly becomes simplified with the relevant information highlighted." width="85%" /&gt;
&lt;p class="caption"&gt;image credit: https://www.darkhorseanalytics.com/portfolio-data-looks-better-naked&lt;/p&gt;
&lt;/div&gt;

---

# Simplified

&lt;div class="figure"&gt;
&lt;img src="../images/barplot-gif-before.png" alt="The before and after images with the process of simplifying a barplot." width="47%" /&gt;&lt;img src="../images/barplot-gif-after.png" alt="The before and after images with the process of simplifying a barplot." width="47%" /&gt;
&lt;p class="caption"&gt;image credit: https://www.darkhorseanalytics.com/portfolio-data-looks-better-naked&lt;/p&gt;
&lt;/div&gt;

---

# NYT 9/7/21

&lt;div class="figure"&gt;
&lt;img src="../images/vacc-case.png" alt="A scatterplot showing that states with higher vaccination rates have lower COVID case rates.  A few states are highlighted in stronger font: NY, CA, MA have low COVID rates and high vaccination rates; SC GA, ID have high COVID rates and low vaccination rates; TX and USA are in the middle with medium vaccination and medium COVID rates." width="90%" /&gt;
&lt;p class="caption"&gt;One in 5,000, NYT, D. Leonhardt 9/7/21; image credit: https://www.nytimes.com/2021/09/07/briefing/risk-breakthrough-infections-delta.html&lt;/p&gt;
&lt;/div&gt;


---

# Worth a Mention

.pull-left[
W.E.B. DuBois (1868-1963)

* sociologist
* data scientist]

.pull-right[
&lt;div class="figure"&gt;
&lt;img src="../images/WEB_DuBois_1918.jpg" alt="image of WEB Dubois" width="40%" /&gt;
&lt;p class="caption"&gt;image credit: wikipedia&lt;/p&gt;
&lt;/div&gt;
]

In 1900 Du Bois contributed approximately 60 data visualizations to an exhibit at the Exposition Universelle in Paris, an exhibit designed to illustrate the progress made by African Americans since the end of slavery (only 37 years prior, in 1863).

---

# Beautiful &amp; Informative Graphics

https://drawingmatter.org/w-e-b-du-bois-visionary-infographics/

.pull-left[
&lt;img src="../images/dubois-graphs1.png" title="figures from DuBois's 1900 exhibition" alt="figures from DuBois's 1900 exhibition" width="90%" /&gt;
]
.pull-right[
&lt;img src="../images/dubois-graphs2.png" title="figures from DuBois's 1900 exhibition" alt="figures from DuBois's 1900 exhibition" width="90%" /&gt;
]

---

# Agenda  9/9/21

1. Grammar of graphics
2. `ggplot2`

---

# Grammar of graphics

Yau (2013) gives us nine visual cues, and Wickham (2014) translates them into a language using `ggplot2`.  

1. Visual Cues:  the aspects of the figure where we should focus.  
**Position** (numerical) where in relation to other things?  
**Length** (numerical) how big (in one dimension)?  
**Angle** (numerical) how wide? parallel to something else?  
**Direction** (numerical) at what slope?  In a time series, going up or down?  
**Shape** (categorical) belonging to what group?  
**Area** (numerical) how big (in two dimensions)?  Beware of improper scaling!  
**Volume** (numerical) how big (in three dimensions)?  Beware of improper scaling!  
**Shade** (either) to what extent?  how severely?  
**Color** (either) to what extent? how severely? Beware of red/green color blindness.  

2. Coordinate System: rectangular, polar, geographic, etc.

3. Scale: numeric (linear? logarithmic?), categorical (ordered?), time

4. Context: in comparison to what (think back to ideas from Tufte)

---

## Pieces of the Graph

.pull-left[
Visual Cues of Yau (2013):   
**Position** (numerical)  
**Length** (numerical)  
**Angle** (numerical)   
**Direction** (numerical)  
**Shape** (categorical)   
**Area** (numerical)  
**Volume** (numerical)  
**Shade** (either)    
**Color** (either)  
]

.pull-right[
&lt;img src="../images/Yau_viz_cues.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Order Matters


&lt;img src="../images/Yau_order.png" width="100%" style="display: block; margin: auto;" /&gt;


---

## Cues Together

&lt;img src="../images/Yau_cuestogether.png" width="100%" style="display: block; margin: auto;" /&gt;

---


# Goals of `ggplot2`

What I will try to do

 * give a tour of `ggplot2`
 
 * explain how to think about plots the `ggplot2` way
 
 * prepare/encourage you to learn more later
 
What I can't do in one session

 * show every bell and whistle
 
 * make you an expert at using `ggplot2`
 

---

# Getting help

1.  One of the best ways to get started with ggplot is to google what you want to do with the word ggplot.  Then look through the images that come up.  More often than not, the associated code is there.  There are also ggplot galleries of images, one of them is here: https://plot.ly/ggplot2/

2. Look at the end of this presentation and the syllabus.  More help options there.

&lt;img src="../images/plotly.png" width="100%" style="display: block; margin: auto;" /&gt;


---

## What are the visual cues on this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;
]

.pull-right[
*  position
*  length
*  shape
*  area/volume
*  shade/color




Coordinate System?  Scale?
]


---

## What are the visual cues on this plot?



.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;
]

.pull-right[
*  position
*  length
*  shape
*  area/volume
*  shade/color



Coordinate System?  Scale?
]

---

## What are the visual cues on this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;
]

.pull-right[
*  position
*  length
*  shape
*  area/volume
*  shade/color


Coordinate System?  Scale?
]



---


## The grammar of graphics `ggplot` 
            

**geom**: the geometric "shape" used to display data
 
  * bar, point, line, ribbon, text, etc.
 
**aesthetic**: an attribute controlling how geom is displayed wih respect to variables

  * x position, y position, color, fill, shape, size, etc.

**scale**: adjust information in the aesthetic to map onto the plot

  * *particular* assignment of colors, shapes, sizes, etc.; making axes continuous or constrained to a particular range of values.
 
**guide**: helps user convert visual data back into raw data (legends, axes)

**stat**: a transformation applied to data before geom gets it

  * example: histograms work on binned data

---

## Set up


```r
require(mosaic)
data(Births78)     # restore fresh version of Births78
head(Births78, 3)
```

```
##         date births wday year month day_of_year day_of_month day_of_week
## 1 1978-01-01   7701  Sun 1978     1           1            1           1
## 2 1978-01-02   7527  Mon 1978     1           2            2           2
## 3 1978-01-03   8825  Tue 1978     1           3            3           3
```


 
---

## How do we make this plot?
   
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;
]

.pull-right[
Two Questions:

 1. What do we want R to do?  (What is the goal?)
 
 2. What does R need to know?
]

---

## How do we make this plot?
   
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;
]

.pull-right[
1. Goal: scatterplot = a plot with points
 
2. What does R need to know?
 
    * data source: `Births78`

    * aesthetics: 
 
        * `date -&gt; x`
        * `births -&gt; y`
        * points (!)
]
---

## How do we make this plot?
   
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;
]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;ggplot(&lt;span style='background-color:#ffff7f'&gt;data=&lt;/span&gt;Births78, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;aes&lt;/span&gt;(x=date, y=births)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() +&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;br&gt;&lt;br&gt;ggplot() +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style='background-color:#ffff7f'&gt;data=&lt;/span&gt;Births78, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;aes&lt;/span&gt;(x=date, y=births)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;


]



---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;
]

.pull-right[
What has changed?  

 * new aesthetic: mapping color to day of week

Adding day of week to the data set

The `wday()` function in the `lubridate` package computes 
the day of the week from a date.
]

---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-28-1.png)&lt;!-- --&gt;
]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;Births78 &lt;- &amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;Births78 %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;mutate(&lt;span style='background-color:#ffff7f'&gt;day_of_week&lt;/span&gt; = &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;wday(date, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;label=TRUE))&lt;br&gt;Births78 %&gt;%&lt;br&gt;ggplot(aes(x=date&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;y=births, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;color=&lt;span style='background-color:#ffff7f'&gt;day_of_week&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() +&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;

]

---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;
]
---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-31-1.png)&lt;!-- --&gt;
]

.pull-right[
lines instead of dots!




&lt;code class ='r hljs remark-code'&gt;Births78 %&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=date, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;y=births,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;color=day_of_week)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_line&lt;/span&gt;() +&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;
]

---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;
]


---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-34-1.png)&lt;!-- --&gt;
]

.pull-right[
Now there are two **layers**: one with points and one with
lines




&lt;code class ='r hljs remark-code'&gt;Births78 %&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=date, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;y=births,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;color=day_of_week)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_point&lt;/span&gt;() + &amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_line&lt;/span&gt;()+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;

 *  The layers are placed one on top of the other:  the points 
are *below* and the lines are *above*.   

 * `data` and `aes` specified in `ggplot()` affect all geoms
]


---

## What does this code do?
  


```r
Births78 %&gt;%
  ggplot(aes(x=date, y=births, color="navy")) + 
  geom_point() +
  ggtitle("US Births in 1978") 
```

---

## What does this code do?




&lt;code class ='r hljs remark-code'&gt;Births78 %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=date, y=births, &lt;span style='background-color:#ffff7f'&gt;color=&lt;/span&gt;"navy")) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() &amp;nbsp;+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-90-1.png)&lt;!-- --&gt;

This is *mapping* the color aesthetic to a new variable with 
only one value ("navy").  
So all the dots get set to the same color, but it's not navy.

---

## Setting vs. Mapping

If we want to *set* the color to be navy for all of the dots, we do 
it outside the `aes()` designation:




&lt;code class ='r hljs remark-code'&gt;Births78 %&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=date, y=births)) + &amp;nbsp;&amp;nbsp;# map variables &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style='background-color:#ffff7f'&gt;color=&lt;/span&gt;"navy") &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ &amp;nbsp;&amp;nbsp;# set attributes&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-91-1.png)&lt;!-- --&gt;

* Note that `color = "navy"` is now outside of the aesthetics list.  That's how `ggplot2` distinguishes between mapping and setting.

---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-39-1.png)&lt;!-- --&gt;
]

---

## How do we make this plot?
    
.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-40-1.png)&lt;!-- --&gt;
]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;Births78 %&gt;%&lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=date, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;y=births)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_line(aes(&lt;span style='background-color:#ffff7f'&gt;color=&lt;/span&gt;day_of_week)) + &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style='background-color:#ffff7f'&gt;color=&lt;/span&gt;"navy") &amp;nbsp;+ &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("US Births in 1978")&lt;/code&gt;

* `ggplot()` establishes the default data and aesthetics
for the geoms, but each geom may change these defaults.

* good practice: put into `ggplot()` the things that affect all (or most) of the layers; rest in `geom_blah()`
]

---

## Setting vs. Mapping (again)

Information gets passed to the plot via:

a. `map` the **variable** information inside the aes (aesthetic) command

a. `set` the **non-variable** information outside the aes (aesthetic) command

---

## Other geoms
 

```r
apropos("^geom_")
```

```
 [1] "geom_abline"                  "geom_area"                   
 [3] "geom_ash"                     "geom_bar"                    
 [5] "geom_barh"                    "geom_bin_2d"                 
 [7] "geom_bin2d"                   "geom_blank"                  
 [9] "geom_boxplot"                 "geom_boxploth"               
[11] "geom_col"                     "geom_colh"                   
[13] "geom_contour"                 "geom_contour_filled"         
[15] "geom_count"                   "geom_crossbar"               
[17] "geom_crossbarh"               "geom_curve"                  
[19] "geom_density"                 "geom_density_2d"             
[21] "geom_density_2d_filled"       "geom_density_line"           
[23] "geom_density_ridges"          "geom_density_ridges_gradient"
[25] "geom_density_ridges2"         "geom_density2d"              
[27] "geom_density2d_filled"        "geom_dotplot"                
[29] "geom_errorbar"                "geom_errorbarh"              
[31] "geom_errorbarh"               "geom_freqpoly"               
[33] "geom_function"                "geom_hex"                    
[35] "geom_histogram"               "geom_histogramh"             
[37] "geom_hline"                   "geom_jitter"                 
[39] "geom_label"                   "geom_line"                   
[41] "geom_linerange"               "geom_linerangeh"             
[43] "geom_lm"                      "geom_map"                    
[45] "geom_path"                    "geom_point"                  
[47] "geom_pointrange"              "geom_pointrangeh"            
[49] "geom_polygon"                 "geom_qq"                     
[51] "geom_qq_line"                 "geom_quantile"               
[53] "geom_rangeframe"              "geom_raster"                 
[55] "geom_rect"                    "geom_ribbon"                 
[57] "geom_ridgeline"               "geom_ridgeline_gradient"     
[59] "geom_rug"                     "geom_segment"                
[61] "geom_sf"                      "geom_sf_label"               
[63] "geom_sf_text"                 "geom_sina"                   
[65] "geom_smooth"                  "geom_spline"                 
[67] "geom_spoke"                   "geom_step"                   
[69] "geom_text"                    "geom_tile"                   
[71] "geom_tufteboxplot"            "geom_violin"                 
[73] "geom_violinh"                 "geom_vline"                  
[75] "geom_vridgeline"             
```

---

## Other geoms

help pages will tell you their aesthetics, default stats, etc.


```r
?geom_area             # for example
```


---

## Let's try `geom_area`

.pull-left[

```r
Births78 %&gt;%
  ggplot(aes(x=date, 
             y=births, 
             fill=day_of_week)) + 
  geom_area()+
  ggtitle("US Births in 1978")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-44-1.png)&lt;!-- --&gt;
]


---
## Let's try `geom_area`

.pull-left[

```r
Births78 %&gt;%
  ggplot(aes(x=date, y=births, fill=day_of_week)) + 
  geom_area()+
  ggtitle("US Births in 1978")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-45-1.png)&lt;!-- --&gt;
]

.pull-right[
... not a good plot


* overplotting is hiding much of the data
* extending y-axis to 0 may or may not be desirable.
]

---

## Side note: what makes a plot good?
   

Most (all?) graphics are intended to help us make comparisons

* How does something change over time?
* Do my treatments matter?  How much?
* Do treatnent and control respond the same way?

**Key plot metric:** Does my plot make the comparisions 
I am interested in 

* easily, and 
* accurately?

---

## Time for some different data
    

HELPrct: Health Evaluation and Linkage to Primary care randomized
clinical trial.  Subjects admitted for treatment for addiction to one 
of three substances.


```r
head(HELPrct)
```

```
##   age anysubstatus anysub cesd d1 daysanysub dayslink drugrisk e2b female
## 1  37            1    yes   49  3        177      225        0  NA      0
## 2  37            1    yes   30 22          2       NA        0  NA      0
## 3  26            1    yes   39  0          3      365       20  NA      0
## 4  39            1    yes   15  2        189      343        0   1      1
## 5  32            1    yes   39 12          2       57        0   1      0
## 6  47            1    yes    6  1         31      365        0  NA      1
##      sex g1b homeless i1 i2 id indtot linkstatus link       mcs      pcs pss_fr
## 1   male yes   housed 13 26  1     39          1  yes 25.111990 58.41369      0
## 2   male yes homeless 56 62  2     43         NA &lt;NA&gt; 26.670307 36.03694      1
## 3   male  no   housed  0  0  3     41          0   no  6.762923 74.80633     13
## 4 female  no   housed  5  5  4     28          0   no 43.967880 61.93168     11
## 5   male  no homeless 10 13  5     38          1  yes 21.675755 37.34558     10
## 6 female  no   housed  4  4  6     29          0   no 55.508991 46.47521      5
##   racegrp satreat sexrisk substance treat avg_drinks max_drinks
## 1   black      no       4   cocaine   yes         13         26
## 2   white      no       7   alcohol   yes         56         62
## 3   black      no       2    heroin    no          0          0
## 4   white     yes       4    heroin    no          5          5
## 5   black      no       6   cocaine    no         10         13
## 6   black      no       5   cocaine   yes          4          4
##   hospitalizations
## 1                3
## 2               22
## 3                0
## 4                2
## 5               12
## 6                1
```



---

## Who are the people in the study?

.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-48-1.png)&lt;!-- --&gt;
]

.pull-right[




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=substance)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_bar&lt;/span&gt;()+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP trial")&lt;/code&gt;

* Hmm.  What's up with `y`?

    * `stat_bin()` is being applied to the data before the 
    `geom_bar()` gets to do its thing.  Binning creates the
    `y` values.
]

---

## Who are the people in the study?

.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-50-1.png)&lt;!-- --&gt;
]


.pull-right[



&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=substance, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;fill=&lt;/span&gt;children)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_bar()+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP trial")&lt;/code&gt;

]

---

## Who are the people in the study?

.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-52-1.png)&lt;!-- --&gt;
]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=substance, &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fill=children)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_bar(&lt;span style='background-color:#ffff7f'&gt;position=&lt;/span&gt;"fill") +&lt;br&gt;&amp;nbsp;&amp;nbsp;ylab("actually, percent")+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP trial")&lt;/code&gt;
]

---

## How old are people in the HELP study?
     

.pull-left[

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-54-1.png)&lt;!-- --&gt;
]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_histogram&lt;/span&gt;()+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP trial")&lt;/code&gt;

Notice the messages

* `stat_bin`:  Histograms are not mapping the raw data but
binned data.  
`stat_bin()` performs the data transformation.

* `binwidth`: a default binwidth has been selected, but we should
really choose our own.
]

---

## Setting the binwidth manually

.pull-left[
![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-56-1.png)&lt;!-- --&gt;


]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_histogram(&lt;span style='background-color:#ffff7f'&gt;binwidth=&lt;/span&gt;2)+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP trial")&lt;/code&gt;

]
---

## How old are people in the HELP study? -- Other geoms
     



&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_freqpoly&lt;/span&gt;(binwidth=2)+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-98-1.png)&lt;!-- --&gt;




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_density&lt;/span&gt;()+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-99-1.png)&lt;!-- --&gt;

---

## Selecting stat and geom manually
  
Every geom comes with a default stat

* for simple cases, the stat is `stat_identity()` which does nothing
* we can mix and match geoms and stats however we like




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt; &amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_line(stat="density")+&lt;/span&gt;&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-100-1.png)&lt;!-- --&gt;

---

## Selecting stat and geom manually
    
Every stat comes with a default geom, every geom with a default stat

* we can specify stats instead of geom, if we prefer
* we can mix and match geoms and stats however we like




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt; &amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;stat_density( geom="line")+&lt;/span&gt;&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-101-1.png)&lt;!-- --&gt;

---

## More combinations




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt; &amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_point(stat="bin", binwidth=3) + &lt;/span&gt;&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_line(stat="bin", binwidth=3) &amp;nbsp;+&lt;/span&gt;&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-102-1.png)&lt;!-- --&gt;

---

## More combinations




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt; &amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_area(stat="bin", binwidth=3) &amp;nbsp;+&lt;/span&gt;&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-103-1.png)&lt;!-- --&gt;

---

## More combinations




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt; &amp;nbsp;ggplot(aes(x=age)) + &lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_point(stat="bin", binwidth=3, aes(size=..count..)) +&lt;/span&gt;&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_line(stat="bin", binwidth=3) +&lt;/span&gt;&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-104-1.png)&lt;!-- --&gt;

---

## How much drinking? (i1)
    


```r
HELP_data %&gt;% 
  ggplot(aes(x=i1)) + geom_histogram()+
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-65-1.png)&lt;!-- --&gt;

---

## How much drinking? (i1)
 

```r
HELP_data %&gt;% 
  ggplot(aes(x=i1)) + geom_density()+
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-66-1.png)&lt;!-- --&gt;

---

## How much drinking? (i1)
 

```r
HELP_data %&gt;% 
  ggplot(aes(x=i1)) + geom_area(stat="density")+
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-67-1.png)&lt;!-- --&gt;


---

## Covariates: Adding in more variables
  

Using color and linetype:




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=i1, &lt;span style='background-color:#ffff7f'&gt;color=&lt;/span&gt;substance, &lt;span style='background-color:#ffff7f'&gt;linetype=&lt;/span&gt;children)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_line(stat="density")+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-105-1.png)&lt;!-- --&gt;

---

## Using color and facets




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=i1, color=substance)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_line(stat="density") + &lt;span style='background-color:#ffff7f'&gt;facet_grid&lt;/span&gt;( . ~ children )+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-106-1.png)&lt;!-- --&gt;




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=i1, color=substance)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_line(stat="density") + &lt;span style='background-color:#ffff7f'&gt;facet_grid&lt;/span&gt;( children ~ . )+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-107-1.png)&lt;!-- --&gt;

---

## Boxplots 
   
Boxplots use `stat_quantile()` (five number summary).

The quantitative variable must be `y`, and there must be an 
additional `x` variable. 


```r
HELP_data %&gt;% 
  ggplot(aes(x=substance, y=age, color=children)) + 
  geom_boxplot()+
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-71-1.png)&lt;!-- --&gt;

---

## Horizontal boxplots
    
Horizontal boxplots  are obtained by flipping the coordinate system:

* `coord_flip()` may be used with other plots as well to reverse the roles
of `x` and `y` on the plot.




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=substance, y=age, color=children)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot() +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;coord_flip()&lt;/span&gt;+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-108-1.png)&lt;!-- --&gt;

---

## Axes scaling with boxplots
    
We can scale the continuous axis



&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=substance, y=age, color=children)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot() +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;coord_trans&lt;/span&gt;(y="exp")+&lt;br&gt;&amp;nbsp;&amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-109-1.png)&lt;!-- --&gt;
---

## Give me some space
  
We've triggered a new feature: `dodge` (for dodging things left/right).
We can control how much if we set the dodge manually.




&lt;code class ='r hljs remark-code'&gt;HELP_data %&gt;% &lt;br&gt; &amp;nbsp;ggplot(aes(x=substance, y=age, color=children)) + &lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_boxplot(position=position_dodge(width=1)) +&lt;/span&gt;&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-110-1.png)&lt;!-- --&gt;

---

## Issues with bigger data

* Although we can see a generally positive association (as we would 
expect), the overplotting may be hiding information.




&lt;code class ='r hljs remark-code'&gt;require(NHANES)&lt;br&gt;dim(NHANES)&lt;/code&gt;

```

## [1] 10000    76

```



&lt;code class ='r hljs remark-code'&gt;NHANES %&gt;% &amp;nbsp;ggplot(aes(x=Height, y=Weight)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() + &lt;span style='background-color:#ffff7f'&gt;facet_grid&lt;/span&gt;( Gender ~ PregnantNow )&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-111-1.png)&lt;!-- --&gt;

---

## Using alpha (opacity)

One way to deal with overplotting is to set the opacity low.




&lt;code class ='r hljs remark-code'&gt;NHANES %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=Height, y=Weight)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style='background-color:#ffff7f'&gt;alpha=0.01&lt;/span&gt;) + facet_grid( Gender ~ PregnantNow )&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-112-1.png)&lt;!-- --&gt;

---

## geom_density2d
  
Alternatively (or simultaneously) we might prefere a different 
geom altogether.




&lt;code class ='r hljs remark-code'&gt;NHANES %&gt;% &lt;br&gt;&amp;nbsp;&amp;nbsp;ggplot(aes(x=Height, y=Weight)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style='background-color:#ffff7f'&gt;geom_density2d()&lt;/span&gt; + facet_grid( Gender ~ PregnantNow )&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-113-1.png)&lt;!-- --&gt;

---

## Multiple layers

.pull-left[

```r
ggplot( data=HELP_data, aes(x=children, y=age)) +
  geom_boxplot(outlier.size=0) +
  geom_point(alpha=.6) +
  coord_flip()+
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-78-1.png)&lt;!-- --&gt;
]

.pull-right[



&lt;code class ='r hljs remark-code'&gt;ggplot( data=HELP_data, aes(x=children, y=age)) +&lt;br&gt; &amp;nbsp;geom_boxplot(outlier.size=0) +&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_jitter(alpha=.6, width = 0.1) +&lt;/span&gt;&lt;br&gt; &amp;nbsp;coord_flip()+&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-114-1.png)&lt;!-- --&gt;
]


---

## Multiple layers




&lt;code class ='r hljs remark-code'&gt;ggplot( data=HELP_data, aes(x=children, y=age)) +&lt;br&gt; &amp;nbsp;geom_boxplot(outlier.size=0) +&lt;br&gt;&lt;span style='background-color:#ffff7f'&gt; &amp;nbsp;geom_point(alpha=.6, position=position_jitter(width=.1, height=0)) +&lt;/span&gt;&lt;br&gt; &amp;nbsp;coord_flip()+&lt;br&gt; &amp;nbsp;ggtitle("HELP clinical trial at detoxification unit")&lt;/code&gt;


![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-115-1.png)&lt;!-- --&gt;


---

## Things I haven't mentioned (much)
 
 * coords (`coord_flip()` is good to know about)
 
 * themes (for customizing appearance)

 * position (`position_dodge()`, `position_jitterdodge()`,
 `position_stack()`, etc.)
 
 * transforming axes


```r
require(ggthemes)
ggplot(Births78, aes(x=date, y=births)) + geom_point() + 
          theme_wsj()
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-81-1.png)&lt;!-- --&gt;


---

## Things I haven't mentioned (much)
 
 * coords (`coord_flip()` is good to know about)
 
 * themes (for customizing appearance)
 
 * position (`position_dodge()`, `position_jitterdodge()`,
 `position_stack()`, etc.)
 
 * transforming axes
 

```r
ggplot( data=HELP_data, aes(x=substance, y=age, color=children)) +
  geom_boxplot(coef = 10, position=position_dodge()) +
  geom_point(aes(color=children, fill=children), position=position_jitterdodge()) +
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-82-1.png)&lt;!-- --&gt;


---

## A little bit of everything


```r
ggplot( data=HELP_data, aes(x=substance, y=age, color=children)) +
  geom_boxplot(coef = 10, position=position_dodge(width=1)) +
  geom_point(aes(fill=children), alpha=.5, 
             position=position_jitterdodge(dodge.width=1, jitter.width = 0.2)) + 
  facet_wrap(~homeless)+
  ggtitle("HELP clinical trial at detoxification unit")
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-83-1.png)&lt;!-- --&gt;

&lt;!--
## Some short cuts
   

1. `qplot()` provides "quick plots" for `ggplot2`

```r
qplot(length, width, data=KidsFeet)
```

![](2021-09-07-ggplotPresent_files/figure-html/unnamed-chunk-84-1.png)&lt;!-- --&gt;

2. `mplot(dataframe)` provides an interactive plotting tool for 
both `ggplot2` and `lattice`.


```r
mplot(HELPrct)
```

* quickly make several plots from a data frame
* can show the expression so you can learn how to do it or 
copy and paste into another document
--&gt;
---

## Want to learn more?
    

 * [docs.ggplot2.org/](http://docs.ggplot2.org/)
 
 * [R for Data Science](https://r4ds.had.co.nz/) by Hadley Wickham and Garrett Grolemund

---

## What's around the corner?
   

`shiny`

* interactive graphics / modeling

* https://shiny.rstudio.com/

`plotly` 

&gt; `Plotly` is an R package for creating interactive web-based graphs via plotly's JavaScript graphing library, `plotly.js`. The `plotly` R libary contains the `ggplotly` function , which will convert `ggplot2` figures into a Plotly object. Furthermore, you have the option of manipulating the Plotly object with the `style` function.
 
 * https://plot.ly/ggplot2/getting-started/


`gganimate`

* [`gganimate` tutorial](https://gganimate.com/articles/gganimate.html)

 
 
 

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightlines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
